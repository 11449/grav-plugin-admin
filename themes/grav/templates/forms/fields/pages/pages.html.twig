{% set value = (value is null ? field.default : value) %}
{% set base_depth = 0 %}

{% macro options(field, pages, value, depth) %}

    {% if field.show_root and depth == 0 %}
        <option value="/">/ (Root)</option>
        {% set depth = depth +1 %}
    {% endif %}

    {% set indent = depth == 0 ? '' : repeat('-',depth) ~ ' ' %}

    {% for page in pages.children %}
        {% if page.routable() or field.show_all  %}
            <option {% if page.route == value %}selected="selected"{% endif %} value="{{ page.route }}">
                {{indent}} {{ page.menu }}
            </option>
        {% endif %}
        {% if page.children|length > 0 and (field.show_modular or not page.modular()) %}

            {{ _self.options(field, page,value, depth + 1) }}

        {% endif %}
    {% endfor %}
{% endmacro %}

<div class="form-field grid pure-g">
    <div class="form-label block size-1-3 pure-u-1-3">
        <label>
            {% if field.help %}
            <span class="tooltip" data-asTooltip-position="w" title="{{ field.help|e }}">{{ field.label }}</span>
            {% else %}
            {{ field.label }}
            {% endif %}
            {{ field.validate.required in ['on', 'true', 1] ? '<span class="required">*</span>' }}
        </label>
    </div>
    <div class="form-data block size-2-3 pure-u-2-3">
        <div class="form-select-wrapper {{ field.size }}">
            <select class="{{ field.classes }}" name="{{ (scope ~ field.name)|fieldName }}">
                {% if field.autofocus in ['on', 'true', 1] %}autofocus="autofocus"{% endif %}
                {% if field.novalidate in ['on', 'true', 1] %}novalidate="novalidate"{% endif %}
                {% if field.validate.required in ['on', 'true', 1] %}required="required"{% endif %}
                {{ _self.options(field,pages,value, 0) }}
            </select>
        </div>
    </div>
</div>
